// This file has been generated by comet api-generator.
// You may choose to use this file as scaffold by moving this file out of generated folder and removing this comment.
import { EntityManager, FindOptions } from "@mikro-orm/postgresql";
import { Args, Query, Resolver } from "@nestjs/graphql";
import { PaginatedManufacturerCountries } from "./dto/paginated-manufacturer-countries";
import { ManufacturerCountriesArgs } from "./dto/manufacturer-countries.args";
import { ManufacturerCountry } from "../entities/manufacturer-country.entity";
import { RequiredPermission, gqlArgsToMikroOrmQuery } from "@comet/cms-api";
@Resolver(() => ManufacturerCountry)
@RequiredPermission(["manufacturers"], { skipScopeCheck: true })
export class ManufacturerCountryResolver {
    constructor(protected readonly entityManager: EntityManager) {}
    @Query(() => PaginatedManufacturerCountries)
    async manufacturerCountries(
        @Args()
        { search, filter, offset, limit }: ManufacturerCountriesArgs,
    ): Promise<PaginatedManufacturerCountries> {
        const where = gqlArgsToMikroOrmQuery({ search, filter }, this.entityManager.getMetadata(ManufacturerCountry));
        const options: FindOptions<ManufacturerCountry> = { offset, limit };
        const [entities, totalCount] = await this.entityManager.findAndCount(ManufacturerCountry, where, options);
        return new PaginatedManufacturerCountries(entities, totalCount);
    }
}
