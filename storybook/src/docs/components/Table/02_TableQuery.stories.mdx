import { Meta, Canvas, Story, Source } from "@storybook/addon-docs";

import dedent from "ts-dedent";

<Meta title="Docs/Components/Table/TableQuery" />

**The `Table` component has been deprecated in favor of [MUI X Data Grid](https://mui.com/x/react-data-grid/) in combination with `useDataGridRemote`. View [docs](?path=/story/docs-components-datagrid--page).**

# TableQuery

To fill a `Table` with API data, you can use the `useTableQuery()` hook in combination with the
`TableQuery` component.

The `useTableQuery()` hook is a wrapper of Apollo Client's [useQuery()](https://www.apollographql.com/docs/react/data/queries/#usequery-api).
To use this hook, you have to pass a GraphQL query and a `resolveTableData()` function.
`resolveTableData()` converts the GraphQL response to an object the `Table` can work with.
The `useTableQuery()` hook returns the converted response (`tableData`), an `api` object and the [Apollo query result](https://www.apollographql.com/docs/react/data/queries/#result).

`TableQuery` can be used to wrap a `Table`.
It has a built-in loading state and error handling.
All you have to do is pass the `api`, `error` and `loading` props returned by `useTableQuery()` to `TableQuery`.

<Canvas>
    <Story id="stories-components-table-tablequery--tablequery" />
</Canvas>
