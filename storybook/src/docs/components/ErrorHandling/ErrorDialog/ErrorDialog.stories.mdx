import { Meta, Canvas, Story } from "@storybook/addon-docs";

<Meta title="Docs/Components/Error Handling/Error Dialog" />

# Error Dialog

## Setup

Setup is easy, just add the `ErrorDialogProvider` somewhere in your application

```
import { ErrorDialogProvider } from "@comet/admin";

const App: React.FunctionComponent = ({ children }) => {
    return (
        <OtherProvider>
            <ErrorDialogProvider />
            {children}
        </OtherProvider>
    );
};
```

## Integration into ApolloProvider

There is also the possibility to automatically display an `ErrorDialog` when a GraphQL error occurs (this can also be disabled for requests, which handle errors on their own).

Add the `createErrorDialogApolloLink` to your ApolloLink List when setting up the `apolloClient`

```
const link = ApolloLink.from([
    createErrorDialogApolloLink(),
    createHttpLink({
        uri: `uri`,
    }),
]);
const cache = new InMemoryCache();

return new ApolloClient({
    link,
    cache,
});
```

## Usage

### Error Dialog with Consumer

Error Dialog can be used to display an error in a dialog. Try it out by simply pressing the Button below. You can also use the errorDialog with the `useErrorDialog` Hook

<Canvas>
    <Story id="stories-components-error-handling-error-dialog-automatic-graphql-error-dialog--manual-error-dialog" />
</Canvas>

### Automatic Error Dialog on GraphQL Error

<Canvas>
    <Story id="stories-components-error-handling-error-dialog-automatic-graphql-error-dialog--automatic-error-on-graphql-error" />
</Canvas>
