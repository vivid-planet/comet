import { Meta, Story, Canvas } from "@storybook/addon-docs/blocks";
import { useStoredState } from "@comet/admin";
import { Button, Typography, TextField } from "@material-ui/core";

# Hooks

> Hooks were introduced in React 16.8. They let you use state and other React features without writing a class.
>
> More infos on hooks can be found [React Hooks](https://reactjs.org/docs/hooks-intro.html)

<Meta title="docs/@comet/admin/hooks" />

## useStoredState()

The `useStoredState()` hook has a similar api like the `React.useState()` hook. The main difference is, that `useStoredState()` saves and loads the state by default to local storage, so the state is persistent over tabs, and browser restarts.

### Local Storage

<Canvas>
    <Story name="useStoredState - Local Storage">
        {() => {
            const Story = () => {
                const [storedState, setStoredState] = useStoredState("stored_state_stories_key", 0);
                return (
                    <div>
                        <Typography variant={"h4"}> Stored State: {storedState}</Typography>
                        <Button
                            variant={"contained"}
                            color={"primary"}
                            onClick={() => {
                                setStoredState(storedState + 1);
                            }}
                        >
                            Increment Stored State
                        </Button>
                        <Button
                            color={"primary"}
                            onClick={() => {
                                setStoredState(0);
                            }}
                        >
                            Reset
                        </Button>
                    </div>
                );
            };
            return <Story />;
        }}
    </Story>
</Canvas>

### Session Storage

There is also the possibility to store the state in session storage by setting the kind of storage (`window.localStorage` or `window.sessionStorage`) after the initial state. The session storage is not persistent over tabs and lasts only for the current session.

<Canvas>
    <Story name="useStoredState - Session Storage">
        {() => {
            const Story = () => {
                const [storedState, setStoredState] = useStoredState("stored_state_stories_session_storage_key", "☄️ Comet", window.sessionStorage);
                return (
                    <div>
                        <Typography variant={"h4"}> Stored State: {storedState}</Typography>
                        <TextField
                            value={storedState}
                            onChange={(event) => {
                                setStoredState(event.target.value);
                            }}
                        />
                    </div>
                );
            };
            return <Story />;
        }}
    </Story>
</Canvas>
