# Agent Instructions

## Local Usage (IDE / CLI)
- you can expect setup is already done: all dependencies are installed and builds are done
- when making changes, affected packages need to be built, except the build watcher process is running (managed by dev-pm)
- services can be started by dev-pm

## Cloud / Web Usage (Fresh Clone)
When running in the cloud/web environment and repo is cloned from scratch, before doing any work, you MUST:

1. Install dependencies
   - `NODE_USE_ENV_PROXY=1 ./install.sh`
2. Run build for packages you are working on
   - `pnpm --recursive --filter '<package-name>' run build`

Don't use dev-pm.

When making changes to demo api, run `pnpm run console --help` to verify AppModule is configured correctly and schema.gql regenerates.

## Linting

- When making changes in a package, run `pnpm run lint:eslint --fix` in that package folder to autoformat with ESLint before finalizing changes.

## Demo application

This repository includes a demo application which is showcasing the libraries. 

## Changesets and changelog

- We use Changesets for tracking changes. Create a non-empty changeset file when making relevant user-facing/package changes (not for docs-only or internal-only updates).
- `CHANGELOG.md` is autogenerated; do not edit it manually.

## Commit messages

- Do not use Conventional Commits.
- If a change is scoped to one package, prefix the commit message with the affected package name. Don't include `@comet/` in the package name.

## Generated demo files

- `demo/api` and `demo/admin` contain `generated/` folders. Do not edit files inside `generated/` directly; rerun `api-generator` or `admin-generator` to update them.
- After any changes to `api-generator` or `admin-generator` execute the generator in demo to update the generated files. Before running, build the package.

## Api
- when making changes to `demo/api` verify the api can still start by executing `pnpm run console --help` in `demo/api`, which also updates `schema.gql` in case the schema changed.
